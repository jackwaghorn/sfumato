(function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);b&&b(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function i(e){return s.p+"js/"+({about:"about",workshops:"workshops"}[e]||e)+"."+{about:"f2fe3b77",workshops:"7bd3e641"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={workshops:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({about:"about",workshops:"workshops"}[e]||e)+"."+{about:"31d6cfe0",workshops:"4df189f0"}[e]+".css",a=s.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===a)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],b.parentNode.removeChild(b),n(c)},b.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(b)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(b);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var b=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02ed":function(e,t,n){"use strict";n("62fc")},"0876":function(e,t,n){"use strict";n("9bbe")},"24c2":function(e,t,n){"use strict";n("7200")},2520:function(e,t,n){},"359c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={class:"container-fluid"};function a(e,t,n,a,c,i){var s=Object(r["B"])("NavBar"),u=Object(r["B"])("router-view"),l=Object(r["B"])("TheFooter");return Object(r["u"])(),Object(r["g"])(r["a"],null,[Object(r["j"])(s),Object(r["h"])("div",o,[Object(r["j"])(u,null,{default:Object(r["J"])((function(e){return[Object(r["j"])(r["b"],{name:"route",mode:"out-in"},{default:Object(r["J"])((function(){return[(Object(r["u"])(),Object(r["e"])(Object(r["D"])(e.Component)))]})),_:2},1024)]})),_:1})]),Object(r["j"])(l)],64)}n("ac1f"),n("5319");var c=n("aca7"),i=n.n(c),s=function(e){return Object(r["x"])("data-v-6b3a3b31"),e=e(),Object(r["v"])(),e},u={class:"mb-3"},l={class:"navbar"},d={class:"container-fluid"},b={class:"logo"},m=s((function(){return Object(r["h"])("div",{class:"row"},[Object(r["h"])("div",{class:"col-auto"},[Object(r["h"])("div",{class:"logo-image"},[Object(r["h"])("img",{class:"img-fluid",src:i.a,alt:""})])]),Object(r["h"])("div",{class:"col-5 d-flex align-content-center p-0"},[Object(r["h"])("div",{class:"row"},[Object(r["h"])("div",{class:"col-12 name text-center p-0"},"Sfumato"),Object(r["h"])("div",{class:"col-12 sub-name text-center p-0"}," Katia Margolis ")])])],-1)})),f={class:"page-buttons d-none d-md-block"},p=Object(r["i"])("Home"),j=Object(r["i"])("Gallery"),h=Object(r["i"])("About"),g={class:"login-button d-none d-md-block"},O=s((function(){return Object(r["h"])("button",{type:"button",class:"btn btn-outline-secondary mx-2"}," Login ",-1)})),v={key:1},x=Object(r["i"])("Profile"),y={key:0,class:"navbar d-flex flex-column justify-content-center"},k=Object(r["i"])("Home"),w=Object(r["i"])("Gallery"),I=Object(r["i"])("About"),L={class:"login-button text-center"},_=s((function(){return Object(r["h"])("button",{type:"button",class:"btn btn-outline-secondary mx-2"}," Login ",-1)})),N={key:1},S=Object(r["i"])("Profile");function M(e,t,n,o,a,c){var i=Object(r["B"])("router-link"),s=Object(r["B"])("MenuButton");return Object(r["u"])(),Object(r["g"])("div",u,[Object(r["h"])("nav",l,[Object(r["h"])("div",d,[Object(r["h"])("div",b,[Object(r["j"])(i,{tag:"div",to:"/"},{default:Object(r["J"])((function(){return[m]})),_:1})]),Object(r["j"])(s,{onClick:t[0]||(t[0]=function(e){return a.expand=!a.expand}),expandMenu:a.expand,class:"d-block d-md-none"},null,8,["expandMenu"]),Object(r["h"])("div",f,[Object(r["j"])(i,{to:"/"},{default:Object(r["J"])((function(){return[p]})),_:1}),Object(r["j"])(i,{tag:"div",class:"mx-4",to:"/gallery"},{default:Object(r["J"])((function(){return[j]})),_:1}),Object(r["j"])(i,{to:"/about"},{default:Object(r["J"])((function(){return[h]})),_:1})]),Object(r["h"])("div",g,[c.isLoggedIn?(Object(r["u"])(),Object(r["g"])("div",v,[Object(r["j"])(i,{class:"profile text-muted",to:"/profile"},{default:Object(r["J"])((function(){return[x]})),_:1}),Object(r["h"])("button",{onClick:t[1]||(t[1]=function(){return c.logout&&c.logout.apply(c,arguments)}),type:"button",class:"btn btn-outline-secondary mx-2"}," Logout ")])):(Object(r["u"])(),Object(r["e"])(i,{key:0,to:"/auth"},{default:Object(r["J"])((function(){return[O]})),_:1}))])])]),Object(r["j"])(r["b"],{name:"expand"},{default:Object(r["J"])((function(){return[a.expand?(Object(r["u"])(),Object(r["g"])("div",y,[Object(r["j"])(i,{tag:"div",class:"text-center m-2",to:"/"},{default:Object(r["J"])((function(){return[k]})),_:1}),Object(r["j"])(i,{tag:"div",class:"text-center m-2",to:"/gallery"},{default:Object(r["J"])((function(){return[w]})),_:1}),Object(r["j"])(i,{tag:"div",class:"text-center m-2",to:"/about"},{default:Object(r["J"])((function(){return[I]})),_:1}),Object(r["h"])("div",L,[c.isLoggedIn?(Object(r["u"])(),Object(r["g"])("div",N,[Object(r["j"])(i,{class:"profile text-muted",to:"/profile"},{default:Object(r["J"])((function(){return[S]})),_:1}),Object(r["h"])("button",{onClick:t[2]||(t[2]=function(){return c.logout&&c.logout.apply(c,arguments)}),type:"button",class:"btn btn-outline-secondary mx-2"}," Logout ")])):(Object(r["u"])(),Object(r["e"])(i,{key:0,tag:"div",class:"text-center",to:"/auth"},{default:Object(r["J"])((function(){return[_]})),_:1}))])])):Object(r["f"])("",!0)]})),_:1})])}var A=function(e){return Object(r["x"])("data-v-0c3bb711"),e=e(),Object(r["v"])(),e},C=A((function(){return Object(r["h"])("span",null,null,-1)})),B=A((function(){return Object(r["h"])("span",null,null,-1)})),E=A((function(){return Object(r["h"])("span",null,null,-1)})),T=[C,B,E];function F(e,t,n,o,a,c){return Object(r["u"])(),Object(r["g"])("div",{class:Object(r["p"])({open:n.expandMenu}),id:"nav-icon4"},T,2)}var J={props:["expandMenu"],data:function(){return{showMenu:this.expandMenu}}},P=(n("cd8b"),n("6b0d")),V=n.n(P);const U=V()(J,[["render",F],["__scopeId","data-v-0c3bb711"]]);var D=U,R={components:{MenuButton:D},data:function(){return{expand:!1}},computed:{isLoggedIn:function(){return this.$store.getters.isAuthenticated}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.replace("/")}}};n("02ed");const $=V()(R,[["render",M],["__scopeId","data-v-6b3a3b31"]]);var H=$,q=function(e){return Object(r["x"])("data-v-3ab708c2"),e=e(),Object(r["v"])(),e},G={class:"footer px-4 py-2 d-flex justify-content-between mt-5"},K={class:"text-muted"},W=q((function(){return Object(r["h"])("div",null,[Object(r["h"])("small",{class:"text-muted"},"Facebook"),Object(r["h"])("small",{class:"text-muted mx-4"},"Instagram"),Object(r["h"])("small",{class:"text-muted"},"Contact")],-1)}));function Y(e,t,n,o,a,c){return Object(r["u"])(),Object(r["g"])("div",G,[Object(r["h"])("div",null,[Object(r["h"])("small",K,"Sfumato Â© "+Object(r["F"])(a.currentYear),1)]),W])}var z={data:function(){return{currentYear:(new Date).getFullYear()}}};n("0876");const X=V()(z,[["render",Y],["__scopeId","data-v-3ab708c2"]]);var Q=X,Z={components:{NavBar:H,TheFooter:Q},created:function(){this.$store.dispatch("tryLogin")},computed:{didAutoLogout:function(){return this.$store.getters.didAutoLogout}},watch:{didAutoLogout:function(e,t){e&&e!==t&&this.$router.replace("/")}}};n("57dc");const ee=V()(Z,[["render",a]]);var te=ee,ne=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),re={class:"home"};function oe(e,t,n,o,a,c){var i=Object(r["B"])("WorkshopList");return Object(r["u"])(),Object(r["g"])("div",re,[Object(r["j"])(i)])}var ae=function(e){return Object(r["x"])("data-v-5cdd47be"),e=e(),Object(r["v"])(),e},ce={class:"container-sm"},ie=ae((function(){return Object(r["h"])("div",{class:"row justify-content-center mt-4"},[Object(r["h"])("div",{class:"col col-md-12 col-lg-7"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ")],-1)})),se=ae((function(){return Object(r["h"])("h3",{class:"text-center my-3"},"Workshops",-1)})),ue={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5"},le={class:"card text-dark bg-light h-100 card-hover"},de=["src"],be={class:"card-body"},me={class:"card-title"},fe={class:"card-text"},pe={class:"card-footer bg-transparent"},je={class:"d-flex justify-content-between"},he={class:"text-end text-capitalize"},ge={key:0,class:"text-end badge rounded-pill bg-warning text-dark"},Oe=ae((function(){return Object(r["h"])("i",{class:"bi bi-camera-video-fill mx-2"},null,-1)})),ve=Object(r["i"])(" Online"),xe=[Oe,ve],ye={key:1,class:"text-end badge rounded-pill bg-success"},ke=ae((function(){return Object(r["h"])("i",{class:"bi bi-people-fill mx-2"},null,-1)})),we=Object(r["i"])(" In person"),Ie=[ke,we];function Le(e,t,n,o,a,c){var i=Object(r["B"])("LoadingSpinner"),s=Object(r["B"])("router-link"),u=Object(r["C"])("snip");return Object(r["u"])(),Object(r["g"])("div",ce,[Object(r["j"])(i,{show:a.isLoading},null,8,["show"]),ie,se,Object(r["h"])("div",ue,[(Object(r["u"])(!0),Object(r["g"])(r["a"],null,Object(r["A"])(a.posts,(function(e){return Object(r["u"])(),Object(r["g"])("div",{key:e.id,class:"col"},[Object(r["j"])(s,{to:"/workshops/"+e.uid},{default:Object(r["J"])((function(){return[Object(r["h"])("div",le,[Object(r["h"])("img",{src:e.data.course_image.url,class:"card-img",alt:"..."},null,8,de),Object(r["h"])("div",be,[Object(r["h"])("h5",me,Object(r["F"])(e.data.course_title[0].text),1),Object(r["K"])(Object(r["h"])("p",fe,[Object(r["i"])(Object(r["F"])(e.data.course_description[0].text),1)],512),[[u,3]])]),Object(r["h"])("div",pe,[Object(r["h"])("div",je,[Object(r["h"])("small",he,Object(r["F"])(c.convertDate(e.data.start_date)),1),"online"===e.data.online_or_offline?(Object(r["u"])(),Object(r["g"])("small",ge,xe)):(Object(r["u"])(),Object(r["g"])("small",ye,Ie))])])])]})),_:2},1032,["to"])])})),128))])])}n("8f40"),n("acef");var _e={name:"WorkshopList",data:function(){return{posts:[],isLoading:!1}},methods:{getPosts:function(){var e=this;this.isLoading=!0,this.$prismic.client.query(this.$prismic.Predicates.at("document.type","courses"),{orderings:"[document.first_publication_date desc]"}).then((function(t){e.posts=t.results,e.textLoaded=!1,e.isLoading=!1}))},convertDate:function(e){var t=new Date(e+"T00:00:00"),n={year:"numeric",month:"long",day:"numeric"};return t.toLocaleString("ru-UK",n)}},created:function(){this.getPosts()}};n("7dfc");const Ne=V()(_e,[["render",Le],["__scopeId","data-v-5cdd47be"]]);var Se=Ne,Me={name:"Home",components:{WorkshopList:Se}};const Ae=V()(Me,[["render",oe]]);var Ce=Ae;function Be(e,t,n,o,a,c){var i=Object(r["B"])("UserAuth");return Object(r["u"])(),Object(r["e"])(i)}var Ee={class:"auth-wrapper d-flex align-items-center justify-content-center m-3"},Te={class:"auth-card col col-sm-8 col-md-6 col-lg-4 text-dark bg-light shadow p-3"},Fe={key:0},Je={class:"mb-3"},Pe={class:"mb-3"},Ve={key:1},Ue={class:"mb-3"},De={key:0,class:"form-text"},Re={class:"mb-3"},$e={key:0,class:"form-text"},He={key:2,class:"form-text"},qe={class:"btn btn-outline-secondary"};function Ge(e,t,n,o,a,c){var i=Object(r["B"])("LoadingSpinner"),s=Object(r["B"])("ErrorModal");return Object(r["u"])(),Object(r["g"])("div",null,[Object(r["j"])(i,{show:a.isLoading},null,8,["show"]),Object(r["j"])(s,{"error-text":a.error,show:!!a.error,onClick:c.handleError},null,8,["error-text","show","onClick"]),Object(r["h"])("div",Ee,[Object(r["h"])("div",Te,[Object(r["h"])("form",{onSubmit:t[7]||(t[7]=Object(r["L"])((function(){return c.submitForm&&c.submitForm.apply(c,arguments)}),["prevent"]))},["signup-info"!==a.mode?(Object(r["u"])(),Object(r["g"])("div",Fe,[Object(r["h"])("div",Je,[Object(r["K"])(Object(r["h"])("input",{placeholder:"Email Address*",class:"form-control",type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.email=e})},null,512),[[r["H"],a.email,void 0,{trim:!0}]])]),Object(r["h"])("div",Pe,[Object(r["K"])(Object(r["h"])("input",{placeholder:"Password*",class:"form-control",type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.password=e})},null,512),[[r["H"],a.password,void 0,{trim:!0}]])])])):Object(r["f"])("",!0),"signup-info"===a.mode?(Object(r["u"])(),Object(r["g"])("div",Ve,[Object(r["h"])("div",Ue,[Object(r["K"])(Object(r["h"])("input",{placeholder:"Firstname",onBlur:t[2]||(t[2]=function(e){return c.clearValidity("firstName")}),class:"form-control",type:"text",id:"firstname","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.firstName.val=e})},null,544),[[r["H"],a.firstName.val,void 0,{trim:!0}]]),a.firstName.isValid?Object(r["f"])("",!0):(Object(r["u"])(),Object(r["g"])("p",De," First Name must not be empty. "))]),Object(r["h"])("div",Re,[Object(r["K"])(Object(r["h"])("input",{placeholder:"Surname",onBlur:t[4]||(t[4]=function(e){return c.clearValidity("lastName")}),class:"form-control",type:"text",id:"lastname","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.lastName.val=e})},null,544),[[r["H"],a.lastName.val,void 0,{trim:!0}]]),a.lastName.isValid?Object(r["f"])("",!0):(Object(r["u"])(),Object(r["g"])("p",$e," Last Name must not be empty. "))])])):Object(r["f"])("",!0),a.formIsValid?Object(r["f"])("",!0):(Object(r["u"])(),Object(r["g"])("p",He," Form is invalid. Please try again. ")),Object(r["h"])("button",qe,Object(r["F"])(c.sumbitButtonCaption),1),"login"===a.mode||"signup"===a.mode?(Object(r["u"])(),Object(r["g"])("button",{key:3,type:"button",class:"btn btn-dark mx-2",mode:"flat",onClick:t[6]||(t[6]=function(){return c.switchAuthMode&&c.switchAuthMode.apply(c,arguments)})},Object(r["F"])(c.switchModeButtonCaption),1)):Object(r["f"])("",!0)],32)])])])}var Ke=n("1da1"),We=(n("96cf"),{data:function(){return{firstName:{val:"",isValid:!0},lastName:{val:"",isValid:!0},email:"",password:"",formIsValid:!0,mode:"login",isLoading:!1,error:null}},computed:{sumbitButtonCaption:function(){return"login"===this.mode?"Login":"signup"===this.mode?"Signup":"Save"},switchModeButtonCaption:function(){return"login"===this.mode?"Signup instead":"Login instead"}},methods:{clearValidity:function(e){this[e].isValid=!0},validateForm:function(){return""===this.firstName.val?(this.firstName.isValid=!1,void(this.formIsValid=!1)):""===this.lastName.val?(this.lastName.isValid=!1,void(this.formIsValid=!1)):void 0},submitForm:function(){var e=this;return Object(Ke["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.formIsValid=!0,!(e.password.length<6)){t.next=4;break}return e.formIsValid=!1,t.abrupt("return");case 4:if(e.isLoading=!0,n={email:e.email,password:e.password},t.prev=6,"login"!==e.mode){t.next=13;break}return t.next=10,e.$store.dispatch("login",n);case 10:e.$router.replace("/"),t.next=26;break;case 13:if("signup"!==e.mode){t.next=19;break}return t.next=16,e.$store.dispatch("signup",n);case 16:e.mode="signup-info",t.next=26;break;case 19:if("signup-info"!==e.mode){t.next=26;break}if(e.validateForm(),e.formIsValid){t.next=23;break}return t.abrupt("return");case 23:r={email:e.$store.getters.userEmail,first:e.firstName.val,last:e.lastName.val},e.$store.dispatch("members/registerMember",r),e.$router.replace("/");case 26:t.next=32;break;case 28:t.prev=28,t.t0=t["catch"](6),console.log(t.t0),e.error=t.t0.message||"Failed to authenticate, try again later.";case 32:e.isLoading=!1;case 33:case"end":return t.stop()}}),t,null,[[6,28]])})))()},switchAuthMode:function(){"login"===this.mode?this.mode="signup":(console.log("login"),this.mode="login")},handleError:function(){this.error=null}}});n("24c2");const Ye=V()(We,[["render",Ge],["__scopeId","data-v-4983a6a2"]]);var ze=Ye,Xe={components:{UserAuth:ze}};const Qe=V()(Xe,[["render",Be]]);var Ze,et=Qe,tt=[{path:"/",name:"Home",component:Ce},{path:"/workshops/:id",name:"Workshops",component:function(){return n.e("workshops").then(n.bind(null,"ad56"))}},{path:"/auth",name:"Authenticate",component:et},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/gallery",name:"Gallery",component:function(){return n.e("about").then(n.bind(null,"0d77"))}},{path:"/profile",name:"Profile",component:function(){return n.e("about").then(n.bind(null,"c66d"))}}],nt=Object(ne["a"])({history:Object(ne["b"])("/"),routes:tt}),rt=nt,ot=n("5502"),at={setUser:function(e,t){e.token=t.token,e.userId=t.userId,e.email=t.email,e.didAutoLogout=!1},setAutoLogout:function(e){e.didAutoLogout=!0}},ct=n("5530"),it={login:function(e,t){return Object(Ke["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.dispatch("auth",Object(ct["a"])(Object(ct["a"])({},t),{},{mode:"login"})));case 1:case"end":return n.stop()}}),n)})))()},signup:function(e,t){return Object(Ke["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.dispatch("auth",Object(ct["a"])(Object(ct["a"])({},t),{},{mode:"signup"})));case 1:case"end":return n.stop()}}),n)})))()},auth:function(e,t){return Object(Ke["a"])(regeneratorRuntime.mark((function n(){var r,o,a,c,i,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.mode,o="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD9e2yOWdBgD_zv7brlEYa_XLhRGT3YbCM","signup"===r&&(o="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD9e2yOWdBgD_zv7brlEYa_XLhRGT3YbCM"),n.next=5,fetch(o,{method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})});case 5:return a=n.sent,n.next=8,a.json();case 8:if(c=n.sent,a.ok){n.next=12;break}throw i=new Error(c.message||"Failed to authenticate"),i;case 12:s=1e5*+c.expiresIn,u=(new Date).getTime()+s,localStorage.setItem("token",c.idToken),localStorage.setItem("userId",c.localId),localStorage.setItem("tokenExpiration",u),Ze=setTimeout((function(){e.dispatch("autoLogout")}),s),e.commit("setUser",{email:c.email,token:c.idToken,userId:c.localId});case 19:case"end":return n.stop()}}),n)})))()},tryLogin:function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userId"),r=localStorage.getItem("tokenExpiration"),o=+r-(new Date).getTime();o<0||(Ze=setTimeout((function(){e.dispatch("autoLogout")}),o),t&&n&&e.commit("setUser",{token:t,userId:n}))},logout:function(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("tokenExpiration"),clearTimeout(Ze),e.commit("setUser",{token:null,serId:null})},autoLogout:function(e){e.dispatch("logout"),e.commit("setAutoLogout")}},st={userId:function(e){return e.userId},token:function(e){return e.token},userEmail:function(e){return e.email},isAuthenticated:function(e){return!!e.token},didAutoLogout:function(e){return e.didAutoLogout}},ut={state:function(){return{userId:null,token:null,email:null,didAutoLogout:!1}},mutations:at,actions:it,getters:st},lt={registerMember:function(e,t){e.members.push(t)},setMembers:function(e,t){e.members=t},setCurrentUser:function(e,t){e.currentMember=t}},dt={registerMember:function(e,t){return Object(Ke["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.rootGetters.userId,o={firstName:t.first,lastName:t.last,email:t.email},n.next=4,fetch("https://sfumato-cca11-default-rtdb.europe-west1.firebasedatabase.app/members/".concat(r,".json"),{method:"PUT",body:JSON.stringify(o)});case 4:a=n.sent,a.ok,e.commit("registerMember",Object(ct["a"])(Object(ct["a"])({},o),{},{id:r}));case 7:case"end":return n.stop()}}),n)})))()},loadMembers:function(e){return Object(Ke["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://sfumato-cca11-default-rtdb.europe-west1.firebasedatabase.app/members.json");case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,n.ok){t.next=9;break}throw o=new Error(r.message||"Failed to fetch"),o;case 9:for(c in a=[],r)i={id:c,firstName:r[c].firstName,lastName:r[c].lastName,email:r[c].email},a.push(i);e.commit("setMembers",a);case 12:case"end":return t.stop()}}),t)})))()},fetchThisUser:function(e){return Object(Ke["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootGetters.userId,t.next=3,fetch("https://sfumato-cca11-default-rtdb.europe-west1.firebasedatabase.app/members/".concat(n,".json"));case 3:return r=t.sent,t.next=6,r.json();case 6:if(o=t.sent,r.ok){t.next=10;break}throw a=new Error(o.message||"Failed to fetch"),a;case 10:c={id:n,firstName:o.firstName,lastName:o.lastName,email:o.email},i=c,e.commit("setCurrentUser",i);case 13:case"end":return t.stop()}}),t)})))()}},bt={members:function(e){return e.members},currentUser:function(e){return e.currentMember},hasMembers:function(e){return e.members&&e.members.length>0},isMember:function(e,t,n,r){var o=t.members,a=r.userID;return o.some((function(e){return e.id===a}))}},mt={namespaced:!0,state:function(){return{currentMember:null,members:[{id:"m1",firstName:"Jerry",lastName:"Paper",email:"jerry@paper.com"},{id:"m2",firstName:"Art",lastName:"Garfunk",email:"art@gar.com"},{id:"m3",firstName:"Cher",lastName:"",email:"covering@abba.com"}]}},mutations:lt,actions:dt,getters:bt},ft=Object(ot["a"])({modules:{auth:ut,members:mt},state:function(){return{userId:"m4"}},getters:{userID:function(e){return e.userId}},mutations:{registerCoach:function(e,t){e.coaches.push(t)}},actions:{registerCoach:function(e,t){var n={id:"c2",firstName:t.first,lastName:t.last,email:t.email};e.commit("registeredCoach",n)}}}),pt=n("8398"),jt={key:0,class:"loader d-flex justify-content-center align-items-center"},ht=Object(r["h"])("div",{class:"spinner-border",role:"status"},null,-1),gt=[ht];function Ot(e,t,n,o,a,c){return Object(r["u"])(),Object(r["e"])(r["b"],{name:"modal"},{default:Object(r["J"])((function(){return[n.show?(Object(r["u"])(),Object(r["g"])("div",jt,gt)):Object(r["f"])("",!0)]})),_:1})}var vt={props:["show"]};const xt=V()(vt,[["render",Ot]]);var yt=xt,kt={key:0,class:"loader d-flex justify-content-center align-items-center"},wt={class:"auth-card text-dark bg-light p-3"};function It(e,t,n,o,a,c){return Object(r["u"])(),Object(r["e"])(r["b"],{name:"modal"},{default:Object(r["J"])((function(){return[n.show?(Object(r["u"])(),Object(r["g"])("div",kt,[Object(r["h"])("div",wt,Object(r["F"])(n.errorText),1)])):Object(r["f"])("",!0)]})),_:1})}var Lt={props:["errorText","show"]};n("6997");const _t=V()(Lt,[["render",It]]);var Nt=_t,St=n("cacf"),Mt=n.n(St),At=Object(pt["a"])({endpoint:"https://sfumato.cdn.prismic.io/api/v2"}),Ct=Object(r["d"])(te);Ct.use(At),Ct.use(ft),Ct.use(rt),Ct.use(Mt.a),Ct.component("LoadingSpinner",yt),Ct.component("ErrorModal",Nt),Ct.mount("#app")},"57dc":function(e,t,n){"use strict";n("7745")},"62fc":function(e,t,n){},6997:function(e,t,n){"use strict";n("2520")},7200:function(e,t,n){},7745:function(e,t,n){},"7dfc":function(e,t,n){"use strict";n("359c")},"9bbe":function(e,t,n){},aca7:function(e,t,n){e.exports=n.p+"img/logo.ba4c28c0.jpg"},bb36:function(e,t,n){},cd8b:function(e,t,n){"use strict";n("bb36")}});
//# sourceMappingURL=app.50400a36.js.map